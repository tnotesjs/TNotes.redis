# [0011. Redis åˆ—è¡¨(List)](https://github.com/tnotesjs/TNotes.redis/tree/main/notes/0011.%20Redis%20%E5%88%97%E8%A1%A8(List))

<!-- region:toc -->

- [1. ğŸ“ æ¦‚è¿°](#1--æ¦‚è¿°)
- [2. ğŸ“’ åˆ—è¡¨](#2--åˆ—è¡¨)
- [3. ğŸ“’ å¸¸ç”¨çš„ redis list å‘½ä»¤](#3--å¸¸ç”¨çš„-redis-list-å‘½ä»¤)
- [4. ğŸ’» åŸºç¡€ç¤ºä¾‹](#4--åŸºç¡€ç¤ºä¾‹)

<!-- endregion:toc -->

## 1. ğŸ“ æ¦‚è¿°

- äº†è§£ redis list å¸¸è§å‘½ä»¤ã€‚

## 2. ğŸ“’ åˆ—è¡¨

- åˆ—è¡¨
  - Redis åˆ—è¡¨æ˜¯ç®€å•çš„å­—ç¬¦ä¸²åˆ—è¡¨ï¼ŒæŒ‰ç…§æ’å…¥é¡ºåºæ’åºã€‚ä½ å¯ä»¥æ·»åŠ ä¸€ä¸ªå…ƒç´ åˆ°åˆ—è¡¨çš„å¤´éƒ¨ï¼ˆå·¦è¾¹ï¼‰æˆ–è€…å°¾éƒ¨ï¼ˆå³è¾¹ï¼‰ã€‚
  - ä¸€ä¸ªåˆ—è¡¨æœ€å¤šå¯ä»¥åŒ…å« $2^{32} - 1$ ä¸ªå…ƒç´  (4294967295, æ¯ä¸ªåˆ—è¡¨è¶…è¿‡ 40 äº¿ä¸ªå…ƒç´ )ã€‚
- `index` ç´¢å¼•
  - ç´¢å¼•ä»é›¶å¼€å§‹è®¡æ•°ï¼Œå› æ­¤ 0 è¡¨ç¤ºç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œ 1 è¡¨ç¤ºç¬¬äºŒä¸ªå…ƒç´ ï¼Œä»¥æ­¤ç±»æ¨ã€‚
  - å¯ä»¥ä½¿ç”¨è´Ÿç´¢å¼•æ¥æŒ‡å®šä»åˆ—è¡¨å°¾éƒ¨å¼€å§‹è®¡æ•°çš„å…ƒç´ ï¼Œæ­¤æ—¶ -1 è¡¨ç¤ºæœ€åä¸€ä¸ªå…ƒç´ ï¼Œ -2 è¡¨ç¤ºå€’æ•°ç¬¬äºŒä¸ªå…ƒç´ ï¼Œä¾æ­¤ç±»æ¨ã€‚

## 3. ğŸ“’ å¸¸ç”¨çš„ redis list å‘½ä»¤

::: code-group

```bash [æ’å…¥ä¸å¼¹å‡º]
LPUSH key element [element ...]
# å°†ä¸€ä¸ªæˆ–å¤šä¸ªå€¼æ’å…¥åˆ°åˆ—è¡¨å¤´éƒ¨

RPUSH key element [element ...]
# åœ¨åˆ—è¡¨ä¸­æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå€¼åˆ°åˆ—è¡¨å°¾éƒ¨

LPOP key
# ç§»å‡ºå¹¶è·å–åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ 

RPOP key
# ç§»é™¤åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œè¿”å›å€¼ä¸ºç§»é™¤çš„å…ƒç´ ã€‚
```

```bash [é˜»å¡æ“ä½œ]
BLPOP key1 [key2 ...] timeout
# ç§»å‡ºå¹¶è·å–åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœåˆ—è¡¨ä¸ºç©ºåˆ™é˜»å¡ç­‰å¾…ï¼Œç›´åˆ°è¶…æ—¶æˆ–æœ‰å…ƒç´ å¯å¼¹å‡ºã€‚

BRPOP key1 [key2 ...] timeout
# ç§»å‡ºå¹¶è·å–åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœåˆ—è¡¨ä¸ºç©ºåˆ™é˜»å¡ç­‰å¾…ï¼Œç›´åˆ°è¶…æ—¶æˆ–æœ‰å…ƒç´ å¯å¼¹å‡ºã€‚
```

```bash [åˆ—è¡¨æ“ä½œ]
LRANGE key start stop
# è·å–åˆ—è¡¨æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ 

LINDEX key index
# é€šè¿‡ç´¢å¼•è·å–åˆ—è¡¨ä¸­çš„å…ƒç´ 

LREM key count element
# ç§»é™¤åˆ—è¡¨ä¸­ä¸ value ç›¸ç­‰çš„å…ƒç´ ï¼Œcount è¡¨ç¤ºç§»é™¤çš„ä¸ªæ•°
# count > 0 ï¼šä»å¤´éƒ¨åˆ°å°¾éƒ¨æ–¹å‘ç§»é™¤ç­‰äº element çš„å…ƒç´ ã€‚
# count < 0 ï¼šä»å°¾éƒ¨åˆ°å¤´éƒ¨æ–¹å‘ç§»é™¤ç­‰äº element çš„å…ƒç´ ã€‚
# count = 0 ï¼šç§»é™¤æ‰€æœ‰ç­‰äº element çš„å…ƒç´ ã€‚

LTRIM key start stop
# å¯¹åˆ—è¡¨è¿›è¡Œä¿®å‰ªï¼Œåªä¿ç•™æŒ‡å®šåŒºé—´å†…çš„å…ƒç´ 
```

```bash [é«˜çº§æ“ä½œ]
LSET key index value
# é€šè¿‡ç´¢å¼•è®¾ç½®åˆ—è¡¨å…ƒç´ çš„å€¼

LINSERT key BEFORE|AFTER pivot value
# åœ¨åˆ—è¡¨çš„æŸä¸ªå…ƒç´ å‰æˆ–åæ’å…¥æ–°å…ƒç´ 

RPUSHX key value
# ä¸ºå·²å­˜åœ¨çš„åˆ—è¡¨æ·»åŠ å€¼åˆ°å°¾éƒ¨

LPUSHX key value
# ä¸ºå·²å­˜åœ¨çš„åˆ—è¡¨æ·»åŠ å€¼åˆ°å¤´éƒ¨

RPOPLPUSH source destination
# ç§»é™¤ source åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ° destination åˆ—è¡¨å¤´éƒ¨ï¼Œè¿”å›è¯¥å…ƒç´ 

BRPOPLPUSH source destination timeout
# é˜»å¡ç‰ˆæœ¬çš„ RPOPLPUSHï¼Œè‹¥ source åˆ—è¡¨ä¸ºç©ºåˆ™ç­‰å¾…ï¼Œç›´åˆ°è¶…æ—¶æˆ–æœ‰å…ƒç´ å¯å¼¹å‡º
```

```bash [å…¶ä»–]
LLEN key
# è·å–åˆ—è¡¨é•¿åº¦
```

:::

## 4. ğŸ’» åŸºç¡€ç¤ºä¾‹

```bash
# æ’å…¥å…ƒç´ åˆ°åˆ—è¡¨å¤´éƒ¨
LPUSH mylist "hello"
# (integer) 1

LPUSH mylist "world"
# (integer) 2

# æŸ¥çœ‹åˆ—è¡¨èŒƒå›´
LRANGE mylist 0 -1
# 1) "world"
# 2) "hello"

# å¼¹å‡ºç¬¬ä¸€ä¸ªå…ƒç´ 
LPOP mylist
# "world"

# æŸ¥çœ‹å‰©ä½™å…ƒç´ 
LRANGE mylist 0 -1
# 1) "hello"

# æ’å…¥å…ƒç´ åˆ°å°¾éƒ¨
RPUSH mylist "redis"
# (integer) 2

# æŸ¥çœ‹åˆ—è¡¨
LRANGE mylist 0 -1
# 1) "hello"
# 2) "redis"

# è®¾ç½®æŒ‡å®šç´¢å¼•ä½ç½®çš„å€¼
LSET mylist 1 "database"
# OK

# æŸ¥çœ‹æ›´æ–°åçš„åˆ—è¡¨
LRANGE mylist 0 -1
# 1) "hello"
# 2) "database"

# åˆ é™¤æŒ‡å®šå€¼ï¼ˆåˆ é™¤ä¸€ä¸ª "hello"ï¼‰
LREM mylist 1 "hello"
# (integer) 1

# æŸ¥çœ‹å‰©ä½™å…ƒç´ 
LRANGE mylist 0 -1
# 1) "database"

# è·å–åˆ—è¡¨é•¿åº¦
LLEN mylist
# (integer) 1

# é˜»å¡å¼¹å‡ºï¼ˆæ¼”ç¤ºå‘½ä»¤ï¼Œå®é™…æ‰§è¡Œéœ€åœ¨ä¸åŒå®¢æˆ·ç«¯æ“ä½œï¼‰
BLPOP anotherlist 10
# å¦‚æœ anotherlist ä¸ºç©ºï¼Œåˆ™é˜»å¡æœ€å¤š 10 ç§’

# åˆ—è¡¨ä¿®å‰ªï¼šåªä¿ç•™ç´¢å¼• 0 åˆ° 1 çš„å…ƒç´ 
LTRIM mylist 0 1
# OK
```
