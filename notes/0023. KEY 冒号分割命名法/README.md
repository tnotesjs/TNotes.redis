# [0023. KEY å†’å·åˆ†å‰²å‘½åæ³•](https://github.com/Tdahuyou/TNotes.redis/tree/main/notes/0023.%20KEY%20%E5%86%92%E5%8F%B7%E5%88%86%E5%89%B2%E5%91%BD%E5%90%8D%E6%B3%95)

<!-- region:toc -->

- [1. ğŸ“ æ¦‚è¿°](#1--æ¦‚è¿°)
- [2. ğŸ¤” KEY å†’å·åˆ†å‰²å‘½åæ³•æ˜¯ä»€ä¹ˆï¼Ÿ](#2--key-å†’å·åˆ†å‰²å‘½åæ³•æ˜¯ä»€ä¹ˆ)
- [3. ğŸ¤” KEY å†’å·åˆ†å‰²å‘½åæ³•æœ‰ä»€ä¹ˆç”¨ï¼Ÿ](#3--key-å†’å·åˆ†å‰²å‘½åæ³•æœ‰ä»€ä¹ˆç”¨)
  - [3.1. æ›´å¥½çš„ UI äº¤äº’](#31-æ›´å¥½çš„-ui-äº¤äº’)
  - [3.2. é¿å…é”®åå†²çª](#32-é¿å…é”®åå†²çª)
  - [3.3. ä¾¿äºæŸ¥æ‰¾ä¸ç»´æŠ¤](#33-ä¾¿äºæŸ¥æ‰¾ä¸ç»´æŠ¤)
  - [3.4. æ”¯æŒå‘½åç©ºé—´æ¨¡æ‹Ÿ](#34-æ”¯æŒå‘½åç©ºé—´æ¨¡æ‹Ÿ)
  - [3.5. é€‚ç”¨äºé›†ç¾¤å’Œç¼“å­˜åœºæ™¯](#35-é€‚ç”¨äºé›†ç¾¤å’Œç¼“å­˜åœºæ™¯)

<!-- endregion:toc -->

## 1. ğŸ“ æ¦‚è¿°

- äº†è§£ KEY çš„å‘½åè§„èŒƒåŠå…¶å¥½å¤„ã€‚
- åŸºæœ¬è¯­æ³•ï¼š`<å®ä½“ç±»å‹>:<å®ä½“ç±»å‹>:<å®ä½“ID>`

## 2. ğŸ¤” KEY å†’å·åˆ†å‰²å‘½åæ³•æ˜¯ä»€ä¹ˆï¼Ÿ

```bash
# ä»¥ ğŸ‘‡ ä¸‹é¢è¿™ä¸ªç¤ºä¾‹ä½œä¸ºå‚è€ƒ
HSET user:1000 name "Alice" age "25" email "alice@example.com"
```

- `user:1000` æ˜¯ Redis ä¸­ä¸€ç§ **å‘½åçº¦å®šï¼ˆkey naming conventionï¼‰**ï¼Œç”¨äºæ›´å¥½åœ°ç»„ç»‡å’Œç®¡ç†é”®ï¼ˆkeyï¼‰ï¼Œå…·æœ‰ä»¥ä¸‹ç›®çš„å’Œä¼˜åŠ¿ï¼š
- `user:1000` **è¡¨ç¤ºæ•°æ®ç±»å‹ + ID**
  - `user`: è¡¨ç¤ºè¿™ä¸ª key å­˜å‚¨çš„æ˜¯â€œç”¨æˆ·â€å¯¹è±¡ã€‚
  - `1000`: è¡¨ç¤ºè¯¥ç”¨æˆ·çš„å”¯ä¸€æ ‡è¯† IDã€‚
  - å«ä¹‰æ¸…æ™°ï¼šè¿™æ˜¯ ID ä¸º `1000` çš„ç”¨æˆ·ä¿¡æ¯ã€‚

```bash
HSET user:1001 name "Alice" age "25" email "alice@example.com"
# (integer) 3
mset part1:0001 1 part1:0001:1 1 part1:0001:2 2 part2:0001 2
# OK
keys part1:*
# 1) "part1:0001:1"
# 2) "part1:0001"
# 3) "part1:0001:2"
```

## 3. ğŸ¤” KEY å†’å·åˆ†å‰²å‘½åæ³•æœ‰ä»€ä¹ˆç”¨ï¼Ÿ

| ä½œç”¨         | æè¿°                                                   |
| ------------ | ------------------------------------------------------ |
| æ˜“è¯»æ€§       | `user:1000` æ¸…æ™°è¡¨è¾¾æ˜¯ç”¨æˆ· ID ä¸º 1000 çš„æ•°æ®           |
| é¿å…å†²çª     | ä¸åŒå®ä½“ä½¿ç”¨ä¸åŒå‰ç¼€ï¼Œå¦‚ `user:1000` vs `product:1000` |
| å¯ç»´æŠ¤æ€§     | ä¾¿äºä½¿ç”¨é€šé…ç¬¦æ‰¹é‡æ“ä½œ                                 |
| æ¨¡æ‹Ÿå‘½åç©ºé—´ | ä½¿ç”¨ `:` åˆ†éš”ç¬¦å®ç°é€»è¾‘åˆ†ç»„                            |
| æ”¯æŒæ‰©å±•     | å¦‚ `user:1000:name`ã€`user:1000:email` ç­‰              |

### 3.1. æ›´å¥½çš„ UI äº¤äº’

- ä½ å¯ä»¥åœ¨ redis å®˜ç½‘ä¸­é€šè¿‡ `try redis` è·å–åˆ°ä¸€ä¸ªåœ¨çº¿å…è´¹çš„åœ¨çº¿ redis æ•°æ®åº“ï¼Œç„¶åé€šè¿‡ Redis Insight å·¥å…·æ¥åœ¨çº¿é¢„è§ˆæ•°æ®åº“ä¸­çš„ç›¸å…³æ•°æ®ã€‚

::: swiper

![å›¾ 5](https://cdn.jsdelivr.net/gh/Tdahuyou/imgs@main/2025-07-04-10-57-29.png)

![å›¾ 6](https://cdn.jsdelivr.net/gh/Tdahuyou/imgs@main/2025-07-04-10-58-02.png)

![å›¾ 7](https://cdn.jsdelivr.net/gh/Tdahuyou/imgs@main/2025-07-04-10-58-38.png)

![å›¾ 4](https://cdn.jsdelivr.net/gh/Tdahuyou/imgs@main/2025-07-04-10-55-25.png)

![å›¾ 3](https://cdn.jsdelivr.net/gh/Tdahuyou/imgs@main/2025-07-04-10-54-41.png)

:::

- ä½ å¯ä»¥éšä¾¿åœ¨ VSCode ä¸­ä¸‹è½½ä¸€ä¸ª redis æ’ä»¶ï¼Œç„¶åè¿æ¥åˆ°ä½ çš„ redis æ•°æ®åº“ï¼Œé€šè¿‡å¯è§†åŒ–é¢æ¿æ¥é¢„è§ˆæ•°æ®ã€‚UI è§†å›¾ä¼šè‡ªåŠ¨æ ¹æ®å†’å·åˆ†å‰²å¯¹æ•°æ®è¿›è¡Œåˆ†ç»„ã€‚

::: swiper

![å›¾ 0](https://cdn.jsdelivr.net/gh/Tdahuyou/imgs@main/2025-07-04-10-52-59.png)

![å›¾ 1](https://cdn.jsdelivr.net/gh/Tdahuyou/imgs@main/2025-07-04-10-53-21.png)

![å›¾ 2](https://cdn.jsdelivr.net/gh/Tdahuyou/imgs@main/2025-07-04-10-53-31.png)

:::

### 3.2. é¿å…é”®åå†²çª

- Redis æ˜¯å…¨å±€å‘½åç©ºé—´çš„æ•°æ®åº“ï¼Œä½¿ç”¨å‰ç¼€å¯ä»¥é˜²æ­¢ä¸åŒä¸šåŠ¡æˆ–å®ä½“ä¹‹é—´çš„ key å†²çªã€‚

ä¾‹å¦‚ï¼š

```bash
user:1000
order:1000
```

è™½ç„¶éƒ½æœ‰ `1000`ï¼Œä½†å®ƒä»¬å±äºä¸åŒçš„ä¸šåŠ¡å®ä½“ï¼Œä¸ä¼šå†²çªã€‚

### 3.3. ä¾¿äºæŸ¥æ‰¾ä¸ç»´æŠ¤

- ä½¿ç”¨ç»Ÿä¸€æ ¼å¼å‘½å keyï¼Œå¯ä»¥æ›´å®¹æ˜“åœ°é€šè¿‡å‘½ä»¤å¦‚ `KEYS user:*` æˆ– `SCAN 0 user:*` æ¥æŸ¥æ‰¾ã€è°ƒè¯•ã€æ¸…ç†ç‰¹å®šç±»å‹çš„ keyã€‚

```bash
keys part1:*
# 1) "part1:0001:1"
# 2) "part1:0001"
# 3) "part1:0001:2"

keys user:*
# 1) "user:1001"
# 2) "user:1000"
```

### 3.4. æ”¯æŒå‘½åç©ºé—´æ¨¡æ‹Ÿ

- Redis æ²¡æœ‰åŸç”Ÿçš„å‘½åç©ºé—´æœºåˆ¶ï¼Œä½†é€šè¿‡å†’å· `:` åˆ†éš”ç¬¦ï¼Œå¯ä»¥æ¨¡æ‹Ÿå‡ºç±»ä¼¼å‘½åç©ºé—´çš„ç»“æ„ã€‚
- å¸¸è§å†™æ³•ï¼š

```bash
user:1000:profile
user:1000:settings
```

è¿™è¡¨ç¤ºå¯¹åŒä¸€ä¸ªç”¨æˆ·çš„ä¸åŒæ¨¡å—æ•°æ®è¿›è¡Œç»†åˆ†ã€‚

### 3.5. é€‚ç”¨äºé›†ç¾¤å’Œç¼“å­˜åœºæ™¯

- åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œè‰¯å¥½çš„ key å‘½åæœ‰åŠ©äºå¿«é€Ÿå®šä½é—®é¢˜ã€åšç¼“å­˜æ¸…ç†ã€è¿ç§»ç­‰æ“ä½œã€‚
